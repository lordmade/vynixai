<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vynix Max â€¢ Neon Horizon</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Rounded" rel="stylesheet">

  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <style>
    :root {
      --bg: #000;
      --surface: #141414;
      --accent: #e50914;
      --text: #fff;
      --text-dim: #b3b3b3;
      --transition: all 0.3s ease;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:var(--bg); color:var(--text); font-family:'Inter',sans-serif; overflow-x:hidden; }

    header {
      position:fixed; top:0; left:0; right:0; height:68px; padding:0 4%;
      display:flex; align-items:center; justify-content:space-between; z-index:1000;
      transition:background 0.4s; background:transparent;
    }
    header.scrolled { background:rgba(0,0,0,0.85); backdrop-filter:blur(12px); }
    .logo { font-size:1.8rem; font-weight:900; background:linear-gradient(90deg,#fff,var(--accent)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    .hero {
      height:100vh; min-height:800px; background-size:cover; background-position:center;
      position:relative; display:flex; align-items:flex-end; padding-bottom:12vh; overflow:hidden;
    }
    .hero-backdrop { position:absolute; inset:0; background:radial-gradient(circle at 50% 70%,transparent 30%,rgba(0,0,0,0.85) 70%); z-index:1; }
    .hero-gradient { position:absolute; inset:0; background:linear-gradient(to bottom,rgba(0,0,0,0.3) 0%,rgba(0,0,0,0.6) 40%,#000 75%); z-index:2; }
    .hero-content { position:relative; z-index:3; width:100%; max-width:58%; padding:0 5% 5vh; }
    .hero-maturity-badge { background:#e50914; color:white; font-weight:700; font-size:1.1rem; padding:0.35rem 0.9rem; border-radius:4px; margin-bottom:1.2rem; display:inline-block; }
    .hero-title { font-size:clamp(4.5rem,12vw,8rem); font-weight:900; line-height:0.88; margin-bottom:0.8rem; text-shadow:0 8px 32px rgba(0,0,0,0.9); animation:titleFadeIn 1.4s ease-out forwards; }
    .hero-meta { display:flex; gap:2rem; font-size:1.4rem; font-weight:500; margin-bottom:1.2rem; opacity:0.9; }
    .hero-tagline { font-size:1.45rem; line-height:1.35; max-width:640px; margin-bottom:2.5rem; color:#ddd; }
    .hero-buttons { display:flex; gap:1.2rem; }
    .btn { padding:0.9rem 2.2rem; border-radius:6px; font-size:1.3rem; font-weight:700; display:inline-flex; align-items:center; gap:10px; cursor:pointer; transition:all 0.25s ease; }
    .btn-play { background:white; color:black; animation:pulsePlay 2s infinite ease-in-out; }
    .btn-play:hover { background:rgba(255,255,255,0.85); transform:scale(1.05); }
    .btn-secondary { background:rgba(109,109,110,0.7); color:white; backdrop-filter:blur(4px); }
    .btn-secondary:hover { background:rgba(109,109,110,0.5); }

    .section-title { padding:0 4%; margin:2.5rem 0 1rem; font-size:1.6rem; font-weight:700; }
    .movie-row { padding:0 4%; display:flex; gap:10px; overflow-x:auto; scroll-padding:4%; padding-bottom:1.5rem; }
    .movie-card { min-width:220px; aspect-ratio:16/9; border-radius:6px; overflow:hidden; background:#222; position:relative; transition:all 0.3s ease; cursor:pointer; }
    .movie-card:hover { transform:scale(1.08) translateY(-8px); z-index:10; }
    .movie-card img { width:100%; height:100%; object-fit:cover; }

    .video-modal { position:fixed; inset:0; background:#000; display:none; align-items:center; justify-content:center; z-index:10000; }
    .video-content { width:100vw; height:100vh; position:relative; }
    .video-close { position:absolute; top:30px; right:30px; z-index:10; background:rgba(0,0,0,0.6); color:white; border:none; border-radius:50%; width:50px; height:50px; font-size:30px; cursor:pointer; }

    @keyframes titleFadeIn { from { opacity:0; transform:translateY(40px); } to { opacity:1; transform:translateY(0); } }
    @keyframes pulsePlay { 0%,100% { box-shadow:0 6px 24px rgba(0,0,0,0.5); } 50% { box-shadow:0 12px 40px rgba(229,9,20,0.4); } }

    @media (max-width:768px) {
      .hero { height:80vh; align-items:center; padding-bottom:0; }
      .hero-content { max-width:90%; padding:0 6%; }
      .hero-buttons { flex-direction:column; gap:1rem; }
      .btn { width:100%; font-size:1.3rem; padding:1.2rem; }
    }
  </style>
</head>
<body>

<header id="mainHeader">
  <div class="logo">VYNIX MAX</div>
  <div class="nav-right">
    <img id="userAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=user" class="user-avatar" alt="User"/>
  </div>
</header>

<main>
  <section class="hero" id="heroSection">
    <div class="hero-backdrop"></div>
    <div class="hero-gradient"></div>
    <div class="hero-content">
      <div class="hero-maturity-badge" id="heroBadge">16+</div>
      <h1 class="hero-title" id="heroTitle">Loading...</h1>
      <div class="hero-meta" id="heroMeta"></div>
      <p class="hero-tagline" id="heroDescription">Loading...</p>
      <div class="hero-buttons">
        <button class="btn btn-play cinematic-play" id="heroPlayBtn">
          <span class="material-symbols-rounded">play_arrow</span> Play
        </button>
        <button class="btn btn-secondary">
          <span class="material-symbols-rounded">info</span> More Info
        </button>
      </div>
    </div>
  </section>

  <h2 class="section-title">Continue Watching</h2>
  <div class="movie-row" id="continueWatchingRow"></div>

  <h2 class="section-title">Trending Now</h2>
  <div class="movie-row" id="trendingRow"></div>

  <h2 class="section-title">Popular on Vynix</h2>
  <div class="movie-row" id="popularRow"></div>
</main>

<div id="videoModal" class="video-modal">
  <div class="video-content">
    <button class="video-close" onclick="document.getElementById('videoModal').style.display='none'; player?.pause();">
      <span class="material-symbols-rounded">close</span>
    </button>
    <video-js id="vynixPlayer" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto">
      <source src="" type="video/mp4" />
    </video-js>
  </div>
</div>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyBOyZ3As4GTuNvjemvPF_SpsC6m6vqtNhc",
    authDomain: "fire-b-a8878.firebaseapp.com",
    databaseURL: "https://fire-b-a8878.firebaseio.com",
    projectId: "fire-b-a8878",
    appId: "1:658673187627:web:6e4c29af661785f0afa36e"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();

  // Video Player
  let player = null;
  function initPlayer() {
    if (!player) player = videojs('vynixPlayer', { fluid:true, controls:true, autoplay:false, preload:'auto' });
  }

  function playVideo(src, title, poster='') {
    initPlayer();
    document.getElementById('videoModal').style.display = 'flex';
    player.src({ src, type:'video/mp4' });
    player.poster(poster);
    player.play().catch(()=>{});
  }

  // Real-time Content
  function loadContent() {
    db.ref('/content/hero').on('value', snap => {
      const d = snap.val() || {};
      document.getElementById('heroTitle').innerHTML = d.title || 'NEON HORIZON';
      document.getElementById('heroDescription').textContent = d.description || 'Loading...';
      document.getElementById('heroBadge').textContent = d.ageRating || '16+';
      document.getElementById('heroMeta').innerHTML = `
        <span class="meta-item"><span class="material-symbols-rounded">star</span> ${d.rating||'8.7'}</span>
        <span class="meta-item">${d.year||'2025'}</span>
        <span class="meta-item">${d.duration||'2h 18m'}</span>
      `;
      if (d.backgroundImage) document.getElementById('heroSection').style.backgroundImage = `url(${d.backgroundImage})`;
    });

    ['trending', 'popular'].forEach(type => {
      db.ref(`/content/${type}`).on('value', snap => {
        const items = snap.val() ? Object.values(snap.val()) : [];
        const container = document.getElementById(type + 'Row');
        container.innerHTML = items.map(item => `
          <div class="movie-card" onclick="playVideo('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', '${item.title}', '${item.image||''}')">
            <img src="${item.image || 'https://via.placeholder.com/220x124?text='+encodeURIComponent(item.title)}" alt="${item.title}">
          </div>
        `).join('');
      });
    });
  }

  // Auth & Init
  auth.onAuthStateChanged(user => {
    if (user) {
      document.getElementById('mainHeader').style.display = 'flex';
      document.getElementById('mainContent') ? document.getElementById('mainContent').style.display = 'block' : '';
      document.getElementById('userAvatar').src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.email}`;
      loadContent();
    } else {
      // Optional: show login prompt or redirect
    }
  });

  window.addEventListener('scroll', () => {
    document.querySelector('header').classList.toggle('scrolled', window.scrollY > 50);
  });

  document.getElementById('heroPlayBtn').onclick = () => {
    const title = document.getElementById('heroTitle').textContent.replace('<br>', ' ');
    const poster = document.getElementById('heroSection').style.backgroundImage?.slice(5,-2) || '';
    playVideo('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', title, poster);
  };
</script>
</body>
</html>
