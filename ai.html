<!DOCTYPE html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Vynix AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <style>
    :root {
      --bg: #fafafa;
      --surface: #ffffff;
      --surface-2: #f1f5f9;
      --border: #e2e8f0;
      --text: #0f172a;
      --text-muted: #64748b;
      --accent: #3b82f6;
      --user-bubble: linear-gradient(135deg, #3b82f6, #2563eb);
      --ai-bubble: #f8fafc;
    }

    * { box-sizing: border-box; margin:0; padding:0; }
    html, body { height:100%; overflow:hidden; background:var(--bg); color:var(--text); font-family:'Inter',sans-serif; }
    body { display:flex; flex-direction:column; }

    header {
      height:78px;
      background:var(--surface);
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 24px;
      position:relative;
      z-index:100;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    .logo {
      display:flex;
      align-items:center;
      gap:14px;
      font-weight:900;
      font-size:24px;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    #api-status {
      position:absolute;
      right:24px;
      top:50%;
      transform:translateY(-50%);
      width:14px;
      height:14px;
      border-radius:50%;
      background:#ef4444;
      box-shadow:0 0 12px #ef4444;
      transition:all .4s;
    }
    #api-status.connected { background:#22c55e; box-shadow:0 0 0 20px #22c55e; }

    #messages {
      flex:1;
      overflow-y:auto;
      padding:24px 20px 120px;
      scroll-behavior:smooth;
      -webkit-overflow-scrolling:touch;
      background:var(--bg);
    }

    .message {
      max-width:88%;
      margin-bottom:20px;
      animation:slideUp .45s cubic-bezier(.16,1,.3,1);
    }
    .message.user { margin-left:auto; }
    .message.ai   { margin-right:auto; }

    .bubble {
      padding:16px 22px;
      border-radius:28px;
      position:relative;
      box-shadow:0 4px 16px rgba(0,0,0,0.08);
    }

    .user .bubble {
      background:var(--user-bubble);
      color:white;
      border-bottom-right-radius:8px;
    }

    .ai .bubble {
      background:var(--ai-bubble);
      border:1px solid var(--border);
      color:var(--text);
      border-bottom-left-radius:8px;
    }

    .input-bar {
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:var(--surface);
      border-top:1px solid var(--border);
      padding:16px 20px env(safe-area-inset-bottom);
      padding-bottom:max(16px, env(safe-area-inset-bottom));
      z-index:100;
      box-shadow:0 -4px 20px rgba(0,0,0,0.06);
    }

    .input-wrapper {
      max-width:900px;
      margin:0 auto;
      display:flex;
      align-items:center;
      background:var(--surface-2);
      border:1px solid var(--border);
      border-radius:32px;
      padding:14px 24px;
      gap:16px;
      transition:all .3s ease;
    }

    .input-wrapper:focus-within {
      border-color:var(--accent);
      box-shadow:0 0 0 4px rgba(59,130,246,0.15);
      transform:translateY(-2px);
    }

    #user-input {
      flex:1;
      background:transparent;
      border:none;
      outline:none;
      color:var(--text);
      font-size:17px;
      resize:none;
      max-height:150px;
    }

    #send-btn {
      width:48px;
      height:48px;
      background:linear-gradient(135deg,#3b82f6,#2563eb);
      border:none;
      border-radius:50%;
      color:white;
      cursor:pointer;
      display:grid;
      place-items:center;
      font-size:20px;
      transition:transform .2s,box-shadow .2s;
      box-shadow:0 4px 15px rgba(59,130,246,0.4);
    }
    #send-btn:hover { transform:scale(1.08); }
    #send-btn:active { transform:scale(0.95); }

    .welcome {
      text-align:center;
      margin-top:25vh;
      animation:fadeIn 1s ease-out;
    }
    .welcome h1 {
      font-size:42px;
      font-weight:900;
      background:linear-gradient(90deg,#3b82f6,#8b5cf6,#ec4899);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      margin-bottom:16px;
    }
    .welcome p { font-size:18px; color:var(--text-muted); max-width:400px; margin:0 auto; }

    pre {
      background:#f8fafc !important;
      border:1px solid var(--border);
      border-radius:18px !important;
      padding:20px !important;
      margin:16px 0 !important;
      position:relative;
      overflow-x:auto;
    }

    .copy-code {
      position:absolute;
      top:12px;
      right:12px;
      background:rgba(0,0,0,0.07);
      border:none;
      color:#475569;
      width:36px;
      height:36px;
      border-radius:12px;
      cursor:pointer;
      font-size:16px;
      font-weight:600;
      transition:all .2s;
    }
    .copy-code:hover { background:rgba(0,0,0,0.12); transform:scale(1.1); }

    .typing { display:flex; gap:8px; padding:18px 24px; }
    .typing span {
      width:12px; height:12px; background:var(--accent); border-radius:50%;
      animation:typing 1.4s infinite ease-in-out;
    }
    .typing span:nth-child(2){animation-delay:.2s}.typing span:nth-child(3){animation-delay:.4s}

    @keyframes slideUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)} }
    @keyframes fadeIn { from{opacity:0} to{opacity:1} }
    @keyframes typing { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <svg width="38" height="38" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M12 2L2 22h20L12 2z"/>
      </svg>
      <span>Vynix AI</span>
    </div>
    <div id="api-status"></div>
  </header>

  <div id="messages">
    <div class="welcome" id="welcome-screen">
      <h1>Vynix AI</h1>
      <p>Beautiful Â· Fast Â· Powered by Grok</p>
    </div>
  </div>

  <div class="input-bar">
    <div class="input-wrapper">
      <input type="text" id="user-input" placeholder="Ask me anything..." autocomplete="off" autofocus />
      <button id="send-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
        </svg>
      </button>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
    import { getRemoteConfig, getString, fetchAndActivate } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-remote-config.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBOyZ3As4GTuNvjemvPF_SpsC6m6vqtNhc",
      authDomain: "fire-b-a8878.firebaseapp.com",
      databaseURL: "https://fire-b-a8878.firebaseio.com",
      projectId: "fire-b-a8878",
      storageBucket: "fire-b-a8878.firebasestorage.app",
      messagingSenderId: "658673187627",
      appId: "1:658673187627:web:6e4c29af661785f0afa36e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const remoteConfig = getRemoteConfig(app);
    remoteConfig.settings.minimumFetchIntervalMillis = 3600000;

    const statusDot = document.getElementById('api-status');
    let apiKey = "";

    await fetchAndActivate(remoteConfig);
    apiKey = getString(remoteConfig, 'xai_api_key').trim();

    if (apiKey && apiKey.length > 10) {
      statusDot.classList.add('connected');
    }

    const messagesDiv = document.getElementById('messages');
    const input = document.getElementById('user-input');
    const sendBtn = document.getElementById('send-btn');
    const welcome = document.getElementById('welcome-screen');

    let conversation = [
      { role: "system", content: "You are Vynix AI, a super helpful, witty, and friendly AI assistant built by the vynix.ai team. Never mention Grok, xAI, or Elon Musk." }
    ];

    marked.setOptions({
      highlight: (code, lang) => Prism.languages[lang] ? Prism.highlight(code, Prism.languages[lang], lang) : code,
      breaks: true,
      gfm: true
    });

    function addMessage(content, role = 'ai') {
      if (welcome) welcome.remove();

      const wrapper = document.createElement('div');
      wrapper.className = `message ${role}`;

      const bubble = document.createElement('div');
      bubble.className = 'bubble';

      if (role === 'ai') {
        bubble.innerHTML = marked.parse(content);
        Prism.highlightAllUnder(bubble);
        bubble.querySelectorAll('pre').forEach(pre => {
          const btn = document.createElement('button');
          btn.className = 'copy-code';
          btn.innerHTML = 'Copy';
          btn.onclick = () => {
            navigator.clipboard.writeText(pre.querySelector('code').innerText);
            btn.innerHTML = 'Copied!';
            setTimeout(() => btn.innerHTML = 'Copy', 2000);
          };
          pre.appendChild(btn);
        });
      } else {
        bubble.textContent = content;
      }

      wrapper.appendChild(bubble);
      messagesDiv.appendChild(wrapper);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      addMessage(text, 'user');
      conversation.push({ role: "user", content: text });
      input.value = '';

      const typing = document.createElement('div');
      typing.className = 'typing';
      typing.innerHTML = '<span></span><span></span><span></span>';
      messagesDiv.appendChild(typing);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;

      try {
        const res = await fetch("https://api.x.ai/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "grok-beta",
            messages: conversation,
            temperature: 0.8,
            max_tokens: 4096
          })
        });

        const data = await res.json();
        const reply = data.choices[0].message.content;

        typing.remove();
        addMessage(reply, 'ai');
        conversation.push({ role: "assistant", content: reply });
      } catch (err) {
        typing.remove();
        addMessage("Connection issue â€” check your API key or network ðŸ˜…", 'ai');
      }
    }

    sendBtn.onclick = sendMessage;
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    signInAnonymously(auth);
    input.focus();
  </script>
</body>
</html>
